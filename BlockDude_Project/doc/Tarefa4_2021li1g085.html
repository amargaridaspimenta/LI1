<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Tarefa4_2021li1g085</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>LingYun Zhu &lt;a100820@alunos.uminho.pt&gt;;<br />: Ana Margarida Sousa Pimenta &lt;a100830@alunos.uminho.pt&gt;;</td></tr><tr><th>Safe Haskell</th><td>Safe</td></tr></table><p class="caption">Tarefa4_2021li1g085</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>M&#243;dulo para a realiza&#231;&#227;o da Tarefa 4 do projeto de LI1 em 2021/22.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:moveJogador">moveJogador</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a></li><li class="src short"><a href="#v:correrMovimentos">correrMovimentos</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>] -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a></li><li class="src short"><a href="#v:posdirJog">posdirJog</a> :: <a href="LI12122.html#t:Jogador" title="LI12122">Jogador</a> -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>)</li><li class="src short"><a href="#v:desconstroiMapa">desconstroiMapa</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)]</li><li class="src short"><a href="#v:desconstroi">desconstroi</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; (Int, Int) -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)]</li><li class="src short"><a href="#v:movimentoesquerda">movimentoesquerda</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:movimentodireita">movimentodireita</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:treparsemcaixa">treparsemcaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:jogapanhacaixa">jogapanhacaixa</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></li><li class="src short"><a href="#v:apanhacaixa">apanhacaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>) -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)]</li><li class="src short"><a href="#v:jogpousacaixa">jogpousacaixa</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a></li><li class="src short"><a href="#v:pousacaixa">pousacaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>) -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)]</li><li class="src short"><a href="#v:inverte">inverte</a> :: [[<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>]] -&gt; [[<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>]]</li><li class="src short"><a href="#v:podeavancardireita">podeavancardireita</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:podeavancaresquerda">podeavancaresquerda</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li><li class="src short"><a href="#v:treparcomcaixa">treparcomcaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:moveJogador" class="def">moveJogador</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; <a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a> -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> <a href="#v:moveJogador" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o <code>moveJogador</code> recebe um Jogo e um Movimento retribuindo um novo Jogo, sendo este dependente do movimento aplicado.</p></div></div><div class="top"><p class="src"><a id="v:correrMovimentos" class="def">correrMovimentos</a> :: <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> -&gt; [<a href="LI12122.html#t:Movimento" title="LI12122">Movimento</a>] -&gt; <a href="LI12122.html#t:Jogo" title="LI12122">Jogo</a> <a href="#v:correrMovimentos" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o <code>correrMovimentos</code> receber um Jogo e uma lista de Movimentos, retribuindo assim um novo Jogo, resultante da consecutiva aplica&#231;&#227;o de cada um dos 
movimentos pertencentes &#224; lista.</p></div></div><div class="top"><p class="src"><a id="v:posdirJog" class="def">posdirJog</a> :: <a href="LI12122.html#t:Jogador" title="LI12122">Jogador</a> -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) <a href="#v:posdirJog" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o <code>posdirJog</code> recebe um Jogador e retribui as suas coordenadas e dire&#231;&#227;o. </p><p>Exemplo: Se o jogador estiver na posi&#231;&#227;o (0,3) e virado para Este e a carregar uma caixa (Jogador (0,3) Este True), atrav&#233;s da aplica&#231;&#227;o da fun&#231;&#227;o 
recebemos ((0,3),Este).</p></div></div><div class="top"><p class="src"><a id="v:desconstroiMapa" class="def">desconstroiMapa</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] <a href="#v:desconstroiMapa" class="selflink">#</a></p><div class="doc"><p>Para que o jogador execute um movimento &#233; necess&#225;rio saber se esse movimento &#233; poss&#237;vel e, para isso, iremos recorrer &#224; fun&#231;&#227;o <code>desconstroiMapa</code>, j&#225; utilizada 
na _Tarefa2_, que a partir de um mapa, devolve a sua respetiva lista de pe&#231;as e coordenadas, incluindo as pe&#231;as Vazio.
Utilizamos esta fun&#231;&#227;o pois facilita a procura e verifica&#231;&#227;o de pe&#231;as. </p></div></div><div class="top"><p class="src"><a id="v:desconstroi" class="def">desconstroi</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; (Int, Int) -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] <a href="#v:desconstroi" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:movimentoesquerda" class="def">movimentoesquerda</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:movimentoesquerda" class="selflink">#</a></p><div class="doc"><p><strong>AndarEsquerda</strong></p><p>A fun&#231;&#227;o <code>movimentoesquerda</code> verifica, a partir de uma lista de pe&#231;as e coordenadas e das coordenadas do jogador, se este pode ou n&#227;o executar o movimento 
_AndarEsquerda_.</p><p>Considerando _(x,y)_ as coordenadas do jogador:</p><p>Este movimento s&#243; &#233; poss&#237;vel caso no espa&#231;o imediatamente &#224; esquerda do jogador (x-1,y), exista uma pe&#231;a Vazio, podendo ele, neste movimento, apenas deslocar-se
no eixo das abcissas para a esquerda (caso se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua esquerda e abaixo uma unidade, ou seja, em (x-1,y+1)) 
- 3&#170; guarda da fun&#231;&#227;o - ou sofrer uma situa&#231;&#227;o de queda (caso n&#227;o se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua esquerda e abaixo uma unidade, 
ou seja, em (x-1,y+1)) - 5&#170; guarda da fun&#231;&#227;o (a 2&#170; guarda representa um caso de paragem para a situa&#231;&#227;o de queda).
Para a situa&#231;&#227;o de queda recorremos &#224; recursividade da fun&#231;&#227;o <code>movimentoesquerda</code>.
Caso n&#227;o se verifiquem estas condi&#231;&#245;es, o jogador n&#227;o altera a sua posi&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:movimentodireita" class="def">movimentodireita</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:movimentodireita" class="selflink">#</a></p><div class="doc"><p><strong>AndarDireita</strong></p><p>A fun&#231;&#227;o <code>movimentodireita</code> verifica, a partir de uma lista de pe&#231;as e coordenadas e das coordenadas do jogador, se este pode ou n&#227;o executar o movimento 
_AndarDireita_.</p><p>Considerando _(x,y)_ as coordenadas do jogador:</p><p>Este movimento s&#243; &#233; poss&#237;vel caso no espa&#231;o imediatamente &#224; direita do jogador (x+1,y), exista uma pe&#231;a Vazio, podendo ele, neste movimento, apenas deslocar-se 
uma unidade no eixo das abcissas para a direita (caso se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua direita e abaixo uma unidade, ou seja, em 
(x+1,y+1)) - 3&#170; guarda da fun&#231;&#227;o - ou sofrer uma situa&#231;&#227;o de queda (caso n&#227;o se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua direita e abaixo 
uma unidade, ou seja, em (x+1,y+1)) - 5&#170; guarda da fun&#231;&#227;o (a 2&#170; guarda representa um caso de paragem para a situa&#231;&#227;o de queda).
Para a situa&#231;&#227;o de queda recorremos &#224; recursividade da fun&#231;&#227;o <code>movimentodireita</code>.
Caso n&#227;o se verifiquem estas condi&#231;&#245;es, o jogador n&#227;o altera a sua posi&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:treparsemcaixa" class="def">treparsemcaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:treparsemcaixa" class="selflink">#</a></p><div class="doc"><p><strong>TreparSemCaixa</strong></p><p>Para que o personagem seja capaz de trepar sem caixa, temos de verificar a pe&#231;a imediatamente &#224; frente do jogador (tem de ser um obst&#225;culo) e a pe&#231;a acima desta
(que tem de ser um Vazio).</p><p>Exemplo:</p><p>Considerando _(x,y)_ as coordenadas do jogador.
Caso o personagem esteja voltado para Este e se verifique que a pe&#231;a imediatamente &#224; sua frente (x+1,y) &#233; um obst&#225;culo (uma caixa ou um bloco) e que a pe&#231;a acima 
desta (x+1,y-1) &#233; Vazio, ent&#227;o o jogador assume as coordenadas (x+1,y-1).
Caso o personagem estivsse voltado para Oeste e se encontrasse dentro das mesmas condi&#231;&#245;es, assumiria as coordenadas (x-1,y-1).
Independentemente da dire&#231;&#227;o, caso n&#227;o se verificassem as condi&#231;&#245;esnecess&#225;rias para a realiza&#231;&#227;o do movimento, o personagem n&#227;o alteraria a sua posi&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:jogapanhacaixa" class="def">jogapanhacaixa</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> <a href="#v:jogapanhacaixa" class="selflink">#</a></p><div class="doc"><p><strong>Interagir com caixa</strong></p><ul><li>-| <strong>JogadorApanhaCaixa</strong></li></ul><p>Para que o jogador possa executar o movimento <strong>InterageCaixa</strong> &#233; necess&#225;rio que imediatamente &#224; sua frente exista uma caixa e que a pe&#231;a acima desta seja Vazio,
sendo que quando o jogador apanha a caixa, esta &#233; removida do mapa, sendo substitu&#237;da por Vazio.
Para remover a caixa do mapa constru&#237;mos a fun&#231;&#227;o <code>jogapanhacaixa</code> que recorre a uma fun&#231;&#227;o auxiliar, a <code>apanhacaixa</code>, que recebe uma lista de pe&#231;as e coordenadas
e um conjunto de pe&#231;a e coordenadas, retribuindo uma nova lista.
Dado que a fun&#231;&#227;o <code>jogapanhacaixa</code> recebe um mapa e as coordenadas e dire&#231;&#227;o do personagem e retribui um mapa, &#233; necess&#225;rio avaliar os casos em que o jogador 
pode apanhar uma caixa.</p><p>Exemplo:</p><p>Caso o jogador esteja voltado para Este e exista uma caixa imediatamente &#224; sua frente (condi&#231;&#227;o verificada atrav&#233;s da fun&#231;&#227;o <code>desconstroiMapa</code>, que comprova se 
(Caixa,(x+1,y)) pertence &#224; lista de pe&#231;as e coordenadas correspondente ao mapa), a fun&#231;&#227;o recorre ent&#227;o &#224; auxiliar <code>apanhacaixa</code> que utiliza essa mesma lista e 
o conjunto (Caixa,(x+1,y)) para substituir a caixa por uma nova pe&#231;a, o Vazio. A fun&#231;&#227;o <code>apanhacaixa</code> atua recursivamente.
De seguida, atrav&#233;s da fun&#231;&#227;o <code>constroiMapa</code>, atribuindo lhe a nova lista gerada na fun&#231;&#227;o auxiliar, obtemos o novo mapa, isto &#233;, sem a caixa.</p></div></div><div class="top"><p class="src"><a id="v:apanhacaixa" class="def">apanhacaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>) -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] <a href="#v:apanhacaixa" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:jogpousacaixa" class="def">jogpousacaixa</a> :: <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Mapa" title="LI12122">Mapa</a> <a href="#v:jogpousacaixa" class="selflink">#</a></p><div class="doc"><p><strong>JogadorPousaCaixa</strong></p><p>O m&#233;todo utilizado para o jogador pousar a caixa &#233; id&#234;ntico ao utilizado para o jogador apanhar a caixa.</p><p>Para que o jogador possa executar o movimento <strong>InterageCaixa</strong> &#233; necess&#225;rio que imediatamente &#224; sua frente exista um Vazio, sendo que quando o jogador pousa a 
caixa, esta &#233; inserida do mapa.
Para acrescentar a caixa do mapa constru&#237;mos a fun&#231;&#227;o <code>jogapousacaixa</code> que recorre a uma fun&#231;&#227;o auxiliar, a <code>pousacaixa</code>, que recebe uma lista de pe&#231;as e coordenadas
e um conjunto de pe&#231;a e coordenadas, retribuindo uma nova lista.
Dado que a fun&#231;&#227;o <code>jogapousacaixa</code> recebe um mapa e as coordenadas e dire&#231;&#227;o do personagem e retribui um mapa, &#233; necess&#225;rio avaliar os casos em que o jogador 
pode pousar uma caixa.</p><p>Exemplo:</p><p>Caso o jogador esteja voltado para Este e exista um Vazio imediatamente &#224; sua frente (condi&#231;&#227;o verificada atrav&#233;s da fun&#231;&#227;o <code>desconstroiMapa</code>, que comprova se 
(Vazio,(x+1,y)) pertence &#224; lista de pe&#231;as e coordenadas correspondente ao mapa), a fun&#231;&#227;o recorre ent&#227;o &#224; auxiliar <code>pousacaixa</code> que utiliza essa mesma lista e 
o conjunto (Vazio,(x+1,y)) para substituir o Vazio por uma nova pe&#231;a, uma Caixa. A fun&#231;&#227;o <code>pousacaixa</code> atua recursivamente.
De seguida, atrav&#233;s da fun&#231;&#227;o <code>constroiMapa</code>, atribuindo lhe a nova lista gerada na fun&#231;&#227;o auxiliar, obtemos o novo mapa, isto &#233;, com a caixa.</p></div></div><div class="top"><p class="src"><a id="v:pousacaixa" class="def">pousacaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>) -&gt; [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] <a href="#v:pousacaixa" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:inverte" class="def">inverte</a> :: [[<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>]] -&gt; [[<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>]] <a href="#v:inverte" class="selflink">#</a></p><div class="doc"><p>A fun&#231;&#227;o <code>inverte</code> &#233; usada para inverter o mapa uma vez que a fun&#231;&#227;o <code>desconstroiMapa</code> aplicada nesta tarefa retribui os resultados invertidos.</p></div></div><div class="top"><p class="src"><a id="v:podeavancardireita" class="def">podeavancardireita</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:podeavancardireita" class="selflink">#</a></p><div class="doc"><p><strong>AndarDireita com caixa</strong></p><p>A fun&#231;&#227;o <code>podeavancardireita</code> verifica, a partir de uma lista de pe&#231;as e coordenadas e das coordenadas do jogador, se este pode ou n&#227;o executar o movimento 
_AndarDireita_ enquanto carrega uma caixa.</p><p>Considerando _(x,y)_ as coordenadas do jogador:</p><p>Este movimento s&#243; &#233; poss&#237;vel caso no espa&#231;o imediatamente &#224; direita do jogador (x+1,y) e acima desse espa&#231;o (x+1,y-1), existam pe&#231;as Vazio, podendo o jogador, 
neste movimento, apenas deslocar-se uma unidade no eixo das abcissas para a direita (caso se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua direita 
e abaixo uma unidade, ou seja, em (x+1,y+1) e, caso exista um Vazio no espa&#231;o acima desse, ou seja, (x+1,y-1)) - 3&#170; guarda da fun&#231;&#227;o - ou sofrer uma situa&#231;&#227;o de 
queda (caso se verifiquem os Vazios em (x+1,y) e em (x+1,y-1) e n&#227;o se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua direita e abaixo uma unidade, 
ou seja, em (x+1,y+1)) - 5&#170; guarda da fun&#231;&#227;o (a 2&#170; guarda representa um caso de paragem para a situa&#231;&#227;o de queda).
Para a situa&#231;&#227;o de queda recorremos &#224; recursividade da fun&#231;&#227;o <code>podeavancardireita</code>.
Caso n&#227;o se verifiquem estas condi&#231;&#245;es, o jogador n&#227;o altera a sua posi&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:podeavancaresquerda" class="def">podeavancaresquerda</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:podeavancaresquerda" class="selflink">#</a></p><div class="doc"><p><strong>AndarEsquerda com caixa</strong></p><p>A fun&#231;&#227;o <code>podeavancaresquerda</code> verifica, a partir de uma lista de pe&#231;as e coordenadas e das coordenadas do jogador, se este pode ou n&#227;o executar o movimento 
_AndarEsquerda_ enquanto carrega uma caixa.</p><p>Considerando _(x,y)_ as coordenadas do jogador:</p><p>Este movimento s&#243; &#233; poss&#237;vel caso no espa&#231;o imediatamente &#224; esquerda do jogador (x-1,y) e acima desse espa&#231;o (x-1,y-1), existam pe&#231;as Vazio, podendo o jogador, 
neste movimento, apenas deslocar-se uma unidade no eixo das abcissas para a esquerda (caso se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua esquerda 
e abaixo uma unidade, ou seja, em (x-1,y+1) e, caso exista um Vazio no espa&#231;o acima desse, ou seja, (x-1,y-1)) - 3&#170; guarda da fun&#231;&#227;o - ou sofrer uma situa&#231;&#227;o de 
queda (caso se verifiquem os Vazios em (x-1,y) e em (x-1,y-1) e n&#227;o se verifique a exist&#234;ncia de um bloco ou caixa no espa&#231;o &#224; sua direita e abaixo uma unidade, 
ou seja, em (x-1,y+1)) - 5&#170; guarda da fun&#231;&#227;o (a 2&#170; guarda representa um caso de paragem para a situa&#231;&#227;o de queda).
Para a situa&#231;&#227;o de queda recorremos &#224; recursividade da fun&#231;&#227;o <code>podeavancaresquerda</code>.
Caso n&#227;o se verifiquem estas condi&#231;&#245;es, o jogador n&#227;o altera a sua posi&#231;&#227;o.</p></div></div><div class="top"><p class="src"><a id="v:treparcomcaixa" class="def">treparcomcaixa</a> :: [(<a href="LI12122.html#t:Peca" title="LI12122">Peca</a>, <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>)] -&gt; (<a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a>, <a href="LI12122.html#t:Direcao" title="LI12122">Direcao</a>) -&gt; <a href="LI12122.html#t:Coordenadas" title="LI12122">Coordenadas</a> <a href="#v:treparcomcaixa" class="selflink">#</a></p><div class="doc"><p><strong>TreparComCaixa</strong></p><p>Para que o personagem seja capaz de trepar com caixa, temos de verificar a pe&#231;a imediatamente &#224; frente do jogador (tem de ser um obst&#225;culo) e as duas pe&#231;as
 acima desta (que t&#234;m de ser um Vazio).</p><p>Exemplo:</p><p>Considerando _(x,y)_ as coordenadas do jogador.
Caso o personagem esteja voltado para Este e se verifique que a pe&#231;a imediatamente &#224; sua frente (x+1,y) &#233; um obst&#225;culo (uma caixa ou um bloco) e que as duas pe&#231;as
acima desta (em (x+1,y-1) e (x+1,y-1)) s&#227;o Vazios, ent&#227;o o jogador assume as coordenadas (x+1,y-1).
Caso o personagem estivesse voltado para Oeste e se encontrasse dentro das mesmas condi&#231;&#245;es, assumiria as coordenadas (x-1,y-1).
Independentemente da dire&#231;&#227;o, caso n&#227;o se verificassem as condi&#231;&#245;es neess&#225;rias para realizar o movimento, o personagem n&#227;o alteraria a sua posi&#231;&#227;o.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.22.0</p></div></body></html>